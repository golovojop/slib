<!DOCTYPE html>
<html lang="en">
<body>

<script src="./lib/underscore.js"></script>

<script>

function cl(arg) {
    console.log(arg);
}



/**
 * Спускаемся вниз, и снизу раскручиваем умножение.
 * Основная особенность - выполняем действие с возвращенным результатом
 */


function factUp(n) {
    return (n == 1) ? n : n * factUp(n-1);
}

cl(factUp(5));


/**
 * Умножаем сверху вниз.
 * Здесь другая особенность - не выполняем дополнительных действий с 
 * возвращаемым результатом, но приходится создавать доп функцию: go.
 * Можно и без go, но тогда у factDown должно быть два аргумента:
 * число, для которого вычисляем факториал и аккумулятор.
 
 */

function factDown(n) {

    function go(_n, a) {
	/* cl(["_n=", _n, ", a=", a].join(" ")); */
	return (_n == 1) ? a : go(_n - 1, a * _n);
    }
    return go(n, 1);
}

cl(factDown(5));

/**
 * Числа Фибоначи, в которых каждое последующее число равно сумме двух предыдущих чисел. Сама последовательность
 * начинается с 0, 1.
 *
 *
 * 0, 1, 1, 2, 3, 5, 8, 13, 21...
 *
 * Если посмотреть на последовательность, то видно что каждое последующее равно сумме текущего и предыдущего. На
 * этом и построена рекурсия.
 *
 */

function fiban(n) {
    var arr = [0];
    
    function go(_n, prev) {
	if(_n != n){
	    /* cl("_n " + _n + ",  " + prev); */
	    
	    /* next = last        + before_last  */
	    arr[_n] = arr[_n - 1] + prev;
	    go(_n + 1, arr[_n - 1]);
	}
	else return;
    }
    go(1, 1);

    return arr;
}

cl(fiban(15));


</script>
</body>
</html>

